---
name: post-mortem
description: 总结开发经验为结构化文档：经验总结（四段式）、语法扫盲、弯路复盘。Use when 完成一个功能/模块开发后需要复盘，或用户要求总结经验、整理面经、归纳弯路。
---

# 开发复盘（Post-Mortem）

根据本次开发内容，生成三份结构化文档，放在以开发主题命名的目录下。

## 输出结构

```
docs/{开发主题}/
├── 经验总结.md   # 核心设计与决策
├── 语法扫盲.md   # 涉及的技术概念
└── 弯路.md       # 踩坑与修正
```

---

## 1. 经验总结.md

采用**四段式**精炼总结核心内容：

| 结构 | 说明 |
|------|------|
| **背景** | 业务痛点 + 工程问题（为什么要做） |
| **实现** | 最终方案长什么样（做了什么） |
| **核心** | 3-5 个关键设计点（面试要讲清楚的） |
| **取舍** | 工程权衡与边界（不做什么、为什么不做） |

### 模板

```markdown
# {功能名} 经验总结

## 一、背景
- 业务痛点：...
- 工程问题：...
- 核心需求：...

## 二、实现
- 最终方案：...
- 核心 API：...
- 依赖选择：...

## 三、核心设计点
### 1) 设计点标题
为什么这样设计？面试如何讲清楚？

### 2) ...

## 四、取舍
### 1) 做了什么权衡
- 适合场景：...
- 不适合场景：...

### 2) 移除/简化了什么
为什么移除？未来什么情况下补回？
```

---

## 2. 语法扫盲.md

整理开发中涉及的**技术概念、语法、API**，便于复习和分享。

每个条目包含：

| 字段 | 说明 |
|------|------|
| **定义** | 这是什么 |
| **语法** | 怎么写 |
| **使用场景** | 什么时候用 |
| **注意事项** | 常见坑点 |

### 模板

```markdown
# {功能名} 语法扫盲

## 1. 概念/语法名称

**定义**：...

**语法**：
\`\`\`ts
// 示例代码
\`\`\`

**使用场景**：...

**注意事项**：...

---

## 2. ...
```

---

## 3. 弯路.md

记录开发过程中的**踩坑、错误尝试、修正过程**，每个问题用四段式：

| 结构 | 说明 |
|------|------|
| **问题** | 遇到了什么问题 |
| **原因** | 为什么会出现这个问题 |
| **解决** | 怎么修正的 |
| **Tips** | 避免再犯的经验 |

### 模板

```markdown
# {功能名} 弯路复盘

## 1. 问题标题

| 维度 | 内容 |
|------|------|
| **问题** | ... |
| **原因** | ... |
| **解决** | ... |
| **Tips** | ... |

---

## 2. ...
```

---

## 执行流程

1. **识别开发主题**：从对话上下文提取核心功能名（如"校验快照"、"表单规则统一"）
2. **收集素材**：
   - 查看相关源码（指令、composable、工具函数）
   - 查看已有文档（如 docs/ 下的 md 文件）
   - 回顾对话中的设计讨论和修改记录
3. **生成三份文档**：按上述模板填充内容
4. **创建目录**：`docs/{开发主题}/`
5. **写入文件**

---

## 面试话术生成

在经验总结或弯路文档末尾，可附带一段 30 秒面试话术：

```markdown
## 面试话术

> "在{场景}中，遇到{问题}。我设计了{方案}，核心是{1-3 个关键点}。
> 踩过的坑包括{弯路 1}、{弯路 2}，最终用{解决方案}解决。"
```
