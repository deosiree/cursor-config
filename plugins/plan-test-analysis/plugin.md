---
name: plan-test-analysis
description: 结构化分析测试报错原因，生成修复方案（不改代码）
version: 1.0.0
author: Cursor Skills
---

# Plan模式测试报错分析插件

这是一个结构化的问题诊断框架，用于分析测试报错原因并生成修复方案。采用"先分析后修改"的原则，避免盲目改动代码。

## 核心原则

- **不改代码，只提供分析计划** - 先分析后修改，避免盲目改动
- **结构化诊断** - 从错误堆栈到根因分析
- **定量评估** - 识别关键错误类型和影响范围
- **优先级排序** - 提供清晰的修复路径

## 功能特性

### 1. 现场采集（Context Collection）
- 完整错误信息提取
- 堆栈追踪分析
- 环境信息记录
- 相关文件识别

### 2. 执行计划分析（Execution Plan Analysis）
- 执行路径追踪
- 问题节点识别
- 成本评估

### 3. 根因分析（Root Cause Analysis）
- 按问题类型分组
- 每个问题的根本原因
- 影响范围评估

### 4. 修复方案（Fix Plan）
- 方案概览
- 详细修复步骤
- 预期效果
- 风险评估

### 5. 验证计划（Verification Plan）
- 修复后验证步骤
- 成功标准

## 触发方式

### 明确触发
- 用户说："plan分析"、"plan模式"、"使用plan模式分析"、"先给plan不改代码"
- 用户输入包含：`@plan`、`[PLAN]`、`plan分析`

### 自动识别
- 检测到测试报错信息
- 检测到错误堆栈信息
- 用户询问"为什么测试失败"、"如何修复测试错误"

## 使用场景

### 场景1：测试运行失败
- 运行 `npm test` 后发现有测试失败
- 提供完整错误信息进行分析

### 场景2：需要了解错误原因
- 想知道为什么某个测试会失败，但不想立即修改代码
- 获取详细的分析计划

### 场景3：批量错误分析
- 有多个测试失败，需要系统化分析
- 按错误类型分组的分析报告

## 最佳实践

1. **提供完整上下文** - 包含完整的错误信息和堆栈
2. **一次分析一个主要问题** - 先分析最严重的错误
3. **保存分析结果** - 记录到文档或issue中
4. **按优先级修复** - 根据分析报告中的优先级排序

## 技能文件

- `SKILL.md` - 完整的技能实现文档