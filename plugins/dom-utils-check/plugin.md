---
name: dom-utils-check
description: 排查和改造DOM相关工具函数，处理位置越界、存储异常等问题
version: 1.0.0
author: Cursor Skills
---

# DOM工具函数检查与改造插件

当你遇到DOM相关工具函数变更后引起组件显示异常或测试大量报错时，帮助你快速定位问题并设计清晰的解决方案。

## 功能特性

### 1. 问题定位
- 快速确认组件是否真的渲染了
- 检查元素位置和可见性
- 分析样式和布局问题

### 2. 职责拆分
- 按规范拆分组件与工具函数的职责
- 设计清晰的工具函数接口
- 确保代码结构合理

### 3. 测试验证
- 编写完整的测试用例
- 在多环境中验证修复效果
- 确保代码健壮性

## 触发方式

### 推荐用法
- `@dom-utils-check 悬浮按钮在容器环境不显示，帮我检查一下是不是位置越界问题`
- `@dom-utils-check 工具函数改了之后测试全挂了，帮我看看怎么修复`
- `@dom-utils-check 这个位置恢复逻辑应该怎么重构，让它更健壮`

## 分析步骤

### 1. 快速现场确认（只读）
- **检查组件是否真的渲染了**
  - 使用 `document.querySelector()` 检查元素是否存在
  - 如果返回 `null`：说明组件根本没渲染，可能是权限问题或 `v-if` 条件不满足
  - 如果返回元素：继续检查样式

- **检查元素位置和可见性**
  - 检查 `display`、`visibility`、`opacity` 样式
  - 检查 `z-index` 层级
  - 检查元素是否在视口内

### 2. 工具函数分析
- **分析工具函数的职责**
  - 是否应该由组件处理
  - 是否应该由工具函数处理
  - 接口设计是否合理

- **检查工具函数的实现**
  - 参数验证是否完整
  - 错误处理是否恰当
  - 返回值是否合理

### 3. 重构建议
- **职责拆分建议**
- **接口设计建议**
- **测试用例建议**

## 使用场景

### 场景1：组件显示异常
- 悬浮按钮在容器环境不显示
- 元素位置越界或不可见
- 样式问题导致显示异常

### 场景2：工具函数变更后测试失败
- 修改工具函数后测试大量报错
- 需要重构工具函数接口
- 需要添加测试用例

### 场景3：位置恢复逻辑重构
- 位置恢复逻辑需要更健壮
- 需要处理边界情况
- 需要添加错误处理

## 注意事项

- 插件本身会**分析和定位问题，并给出重构建议**
- 如需真正修改代码，需要明确的修复指令
- 分析结果应记录到文档中

## 技能文件

- `SKILL.md` - 完整的技能实现文档