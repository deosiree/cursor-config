# 对话问题 → 知识 & Skills 萃取 Skill（gen-debugskills）

## Skill 目标

- 在一次“已解决的问题”对话结束后，自动完成三件事（只在你明确要求时执行）：  
  1. **把这次解决的问题抽象成通用规则**，写成新的技术说明文档（Markdown），放到 `.cursor/skills/todolist/`；  
  2. **把该问题挂入某个“易错问题清单”文档**（默认 `生产环境易错问题检查清单.md`），用统一的简要格式登记；  
  3. **把解决方法补充进某个 Skill 文档**（默认 `prod-risk-check.md`），让后续可以用同一个 Skill 快速套用这套分析/排查思路。

## 触发方式（对 Cursor 说）

- 示例指令：
  - `@gen-skills 帮我把这次对话沉淀成 todolist + 易错清单 + skills`
  - `@gen-skills 用 currentDepartment 这次修复作为模板，生成对应的知识和技能`

> 若未显式说明，Skill 默认认为“当前对话已经解决了一个完整问题”，并按下述步骤执行。

## 步骤一：生成问题说明文档（todolist 条目）

1. **从当前对话中提炼问题**（只用文字，不贴具体代码）：
   - 我们要写清楚：
     - 现象 / 影响（不带具体接口名、变量名，而是描述“某功能/某按钮在生产异常”等）；  
     - 触发条件 / 根因类型（例如“循环依赖导致初始化顺序差异”“配置读取时机不一致”等）；  
     - 排查思路 / 修复思路（保持抽象，可引用少量路径，但不写实现细节）。
2. **在 `.cursor/skills/todolist/` 下创建 Markdown 文件**：
   - 文件名建议：根据问题特征起一个简短的、可搜索的中文名（例如：`高风险问题-xxx.md`）。  
   - 格式参考：`.cursor/skills/todolist/高风险问题-currentDepartment-循环依赖.md`，但内容要抽象化，避免绑定具体变量名 / 页面名。

## 步骤二：补充到“易错问题检查清单”中

1. **选择目标清单文档**：
   - 若用户在指令中指定路径，例如：  
     - `.cursor/skills/todolist/某某清单.md`  
   - 否则默认使用：  
     - `.cursor/skills/todolist/生产环境易错问题检查清单.md`
2. **按现有格式追加一个问题条目**：
   - 仿照 `生产环境易错问题检查清单.md` 里的现有条目结构，写入：
     - 简短标题（问题类型 + 一句现象说明）；  
     - 风险类型 / 典型现象 / 关键成因 / 快速检查要点（保持抽象用语）；  
     - “详细说明与修复方案参考”：指向步骤一中新建的 todolist 文档相对路径。

## 步骤三：补充到指定 Skill 中

1. **选择目标 Skill 文档**：
   - 若用户指定，例如：`.cursor/skills/xxx-skill.md`；  
   - 否则默认使用：`.cursor/skills/prod-risk-check.md`。
2. **在 Skill 中补充一小节说明**（遵循该 Skill 原有结构和语言风格）：
   - 说明该问题类型与该 Skill 的关系，例如：
     - “遇到 X 类场景时，可以参考 todolist 文档 Y 的排查/修复思路”；  
     - “在分析 import 图时，特别注意是否存在类似 Y 文档里记录的那种依赖模式”。
   - 只描述**方法与步骤**，不插入具体代码或过长示例。

## 输出要求

- 对用户侧的自然语言反馈应简短说明三件事是否成功：  
  - 新建了哪个 todolist 文档；  
  - 在哪个“易错问题清单”里新增了条目；  
  - 在哪个 Skill 中补充了方法说明。  
- Skill 内部在写入 Markdown 时，应尽量：
  - 用“问题类型 / 现象 / 成因 / 排查 / 修复 / 预防”这类固定小标题；  
  - 避免粘贴长代码，只用路径或概念名做引用。  

