# 对话内容总结Skill

## 技能概述

这是一个用于快速总结对话内容并生成迁移文档的skill。**主要目的**：当对话上下文快满时，开一个新的对话，重新分析之前的上下文总结，以便继续工作。

**核心功能**：
- 根据对话内容灵活提取关键信息（不限于API、数据流等）
- 生成结构化的对话摘要文档
- 保存到`.cursor/plans`目录
- 在新对话中快速恢复上下文，继续工作

**适用场景**：
- 功能实现对话
- 问题排查对话
- 代码重构对话
- 技术讨论对话
- 任何需要在新对话中继续的对话

## 触发方式

### 方式一：明确触发（推荐）

在Cursor的聊天框中输入以下任一命令：

```
@summary 总结对话内容
```

```
生成对话摘要
```

```
总结本次对话的实现功能
```

### 方式二：使用关键词触发

输入包含以下关键词的句子：

- `总结对话`
- `对话摘要`
- `生成摘要`
- `迁移对话`
- `保存对话内容`

**示例**：
```
请总结本次对话中实现的所有功能
```

```
生成对话摘要，保存到plans目录
```

### 方式三：自动识别

当检测到以下情况时，可以自动触发：

- 用户说："把上述对话内实现的功能总结一下"
- 用户说："方便我下次快速总结对话内容"
- 用户要求："总结为一个skills"
- 对话中包含大量实现细节和代码修改

## 总结内容结构

**重要原则**：根据对话内容灵活总结，不强制要求所有部分。如果对话中没有相关内容，则跳过该部分。

### 基础部分（通常都有）

#### 1. 任务目标
- 简要描述本次对话要解决的问题
- 核心需求和目标
- 对话的主要目的

#### 2. 关键实现逻辑
- **只写逻辑，不写具体代码**
- 核心实现思路和设计决策
- 关键算法或处理流程
- 版本控制机制（如有）
- 重要设计模式或架构决策

#### 3. 文件修改清单
- 新增文件列表（相对路径）
- 修改文件列表（相对路径）
- 每个文件的主要变更说明（逻辑层面的）

#### 4. 关键代码位置
- **只写文件相对路径和代码引用，不写具体代码**
- 重要代码的行号引用（格式：`startLine:endLine:filepath`）
- 关键方法的位置
- 示例：`src/views/entry/index.vue:120-150`

### 可选部分（根据对话内容决定）

#### 5. API接口（如有）
- 接口URL、方法、参数、响应格式
- 状态值说明（如有）

#### 6. 数据流（如有）
- 关键业务流程
- 状态转换逻辑
- localStorage缓存逻辑（如有）

#### 7. 测试相关（如有）
- 测试用例说明
- 测试覆盖范围

#### 8. 注意事项
- 重要的实现细节
- 容易出错的地方
- 特殊处理逻辑
- 待办事项或后续计划

## 使用流程

### Step 1: 触发总结

在对话结束时，输入：
```
@summary 总结本次对话的实现功能
```

### Step 2: 确认内容

Skill会生成摘要草稿，检查是否包含：
- ✅ 任务目标清晰
- ✅ 关键实现逻辑（只写逻辑，不写代码）
- ✅ 文件修改清单（相对路径）
- ✅ 关键代码位置引用（文件路径+行号）
- ✅ 根据对话内容灵活包含其他部分（API、数据流等）

### Step 3: 保存到plans目录

Skill会自动将摘要保存到：
```
.cursor/plans/[功能名称]-对话摘要.md
```

### Step 4: 在新对话中使用

在新对话开始时，可以：
1. 直接引用摘要文件
2. 或说："参考 `.cursor/plans/[文件名].md` 中的实现"

## 输出格式示例

**注意**：以下格式是灵活的模板，根据实际对话内容调整，没有的部分可以省略。

```markdown
# [对话主题] - 对话摘要

## 任务目标
[简要描述本次对话要解决的问题和目标]

## 关键实现逻辑
[只写逻辑，不写具体代码]
- 核心实现思路
- 设计决策
- 关键处理流程

## 文件修改清单
[文件相对路径列表]
- `src/views/entry/index.vue` - 主要变更说明
- `src/utils/pollingUtils.js` - 新增文件说明

## 关键代码位置
[只写文件路径和代码引用，不写代码]
- `src/views/entry/index.vue:120-150` - updateV2方法
- `src/utils/pollingUtils.js:45-80` - createMultiRequestPolling函数

## API接口（如有）
[接口详情]

## 数据流（如有）
[流程图或文字描述]

## 注意事项
[重要提示、待办事项等]
```

## 最佳实践

### 1. 及时总结

**好的做法**：
- 完成一个功能模块后立即总结
- 在对话结束前生成摘要

**不好的做法**：
- 等到所有功能完成才总结
- 忘记保存对话内容

### 2. 灵活总结，只写逻辑

**必须包含**：
- 任务目标
- 关键实现逻辑（**只写逻辑，不写具体代码**）
- 文件修改清单（相对路径）
- 关键代码位置（文件路径+行号引用）

**根据对话内容灵活包含**：
- API接口（如果对话涉及新接口）
- 数据流（如果对话涉及复杂流程）
- 测试用例（如果对话涉及测试）
- 错误处理逻辑（如果对话涉及错误处理）
- 性能优化点（如果对话涉及性能）

**重要原则**：
- **实现细节中只写逻辑，不写具体代码**
- **代码相关的只写代码引用（`startLine:endLine:filepath`）或文件相对路径**
- **根据对话内容决定包含哪些部分，不要强制填充所有部分**

### 3. 使用清晰的命名

摘要文件名应该：
- 使用功能名称
- 包含"对话摘要"或"实现总结"字样
- 使用中文或英文均可

**示例**：
- `重构更新接口实现-对话摘要.md`
- `用户认证功能-实现总结.md`

### 4. 在新对话中引用

**方式一：直接引用文件**
```
参考 .cursor/plans/重构更新接口实现-对话摘要.md 中的实现
```

**方式二：简要说明**
```
继续实现更新接口功能，参考之前的对话摘要
```

## 使用场景

### 场景1：对话上下文快满

**情况**：对话上下文即将达到上限，需要开新对话继续工作

**操作**：
```
@summary 总结对话内容，方便迁移到新对话
```

**输出**：结构化的摘要文档，保存到plans目录，包含关键上下文信息

### 场景2：功能实现完成

**情况**：完成了一个复杂功能的实现

**操作**：
```
@summary 总结本次对话中实现的更新接口重构功能
```

**输出**：完整的实现摘要，包含任务目标、实现逻辑、文件修改等

### 场景3：问题排查对话

**情况**：经过多轮对话，排查并解决了问题

**操作**：
```
@summary 总结本次问题排查的过程和解决方案
```

**输出**：问题描述、排查思路、解决方案、相关文件位置

### 场景4：代码重构对话

**情况**：进行了代码重构，需要记录重构思路

**操作**：
```
@summary 总结本次重构的内容和思路
```

**输出**：重构目标、重构逻辑、文件变更、注意事项

## 注意事项

1. **灵活总结**：根据对话内容灵活组织摘要结构，不强制要求所有部分
2. **只写逻辑，不写代码**：实现细节中只描述逻辑和思路，不写具体代码实现
3. **代码位置引用**：使用 `startLine:endLine:filepath` 格式或文件相对路径
4. **保持结构清晰**：使用统一的格式，便于后续查找
5. **及时总结**：在对话上下文快满前及时总结，避免信息丢失
6. **代码位置可能变化**：行号引用仅供参考，实际使用时需要重新定位
7. **恢复上下文**：摘要的目的是在新对话中快速恢复上下文，继续工作

## 相关资源

- **对话摘要示例**：`.cursor/plans/重构更新接口实现-对话摘要.md`
- **Plans目录**：`.cursor/plans/`
- **其他Skills**：`.cursor/skills/`

## 更新日志

- **2024-01-XX**：创建对话内容总结Skill
