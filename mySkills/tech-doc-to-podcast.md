# 技能：技术文档转双人播客（含按问题拆分 Markdown）

## 目标

将一份技术类 Markdown 文档（例如 `docs/React Hook 使用说明.md`）：

- **整体**转写为一篇「考官 × 答题者」的双人播客对话稿（面试风格），答题者回答采用「定义 → 问题 → 解决 → 价值」四段式结构，控制在约 3000 字以内；  
- **按问题拆分**：基于文档中的知识点/问题，为每个问题生成一个独立的 Markdown 播客脚本文件，放到指定输出目录（默认 `podcast`）。

## 入参约定

- **必填：技术文档路径**  
  - 记为：`[技术文档.md]`  
  - 支持相对路径和绝对路径，例如：  
    - `docs/React Hook 使用说明.md`  
    - `f:\Documents\Repertory\Own\md2boke\docs\React Hook 使用说明.md`
- **可选：输出目录**  
  - 记为：`[输出目录]`，用于存放按问题拆分后的播客 Markdown 文件  
  - 若用户未显式提供，则默认：`podcast`（项目根目录下的 `podcast` 文件夹）  
  - 若目录不存在，需要自动创建

## 输出物

1. **总览播客脚本（可选）**
   - 一篇聚焦整份技术文档核心内容的双人播客脚本，一般直接作为聊天输出即可（不强制落盘）。  
   - 内容要求：  
     - 人物：**考官**、**答题者**  
     - 答题者每次回答遵循四段式结构：  
       - **定义**：先给出 Hook / 技术点的清晰定义或定位  
       - **问题**：说明不用该技术或用错时的典型问题/痛点  
       - **解决**：结合项目实践，说明具体使用方式和关键注意点  
       - **价值**：说明这样做带来的工程价值（可维护性、性能、协作等）  
     - 总字数控制在约 **3000 字以内**，避免冗长。

2. **按问题拆分的 Markdown 文件**
   - 为文档中的每一个核心「问题 / 知识点」生成一个独立的 Markdown 文件，放到 `[输出目录]` 中。  
   - **文件名要求**：使用**简短的中文问题提炼**，例如：  
     - `useState如何在函数组件中管理状态.md`  
     - `useEffect如何优雅处理副作用与依赖.md`  
   - 文件内容为一段完整的播客对话，至少包含：  
     - 考官抛出该问题的场景化提问  
     - 答题者按「定义 → 问题 → 解决 → 价值」结构的完整回答  
   - 语言统一使用**简体中文**。

## 流程指令

1. **解析入参**
   - 从用户指令中提取：  
     - `[技术文档.md]`：技术说明文档路径  
     - `[输出目录]`：若未给出，则使用默认 `podcast`
   - 若路径为相对路径，基于当前工作区根目录解析为绝对路径。

2. **路径与目录检查**
   - 校验 `[技术文档.md]` 是否存在且为 Markdown 文件（扩展名 `.md`）。  
   - 若不存在，需清晰提示用户，并请求修正路径。  
   - 检查 `[输出目录]`：  
     - 若不存在，创建目录；  
     - 若存在，允许覆盖同名文件（无需手动删除，但应知晓会覆写）。

3. **解析技术文档结构**
   - 读取并分析技术文档内容，重点识别：  
     - 一级/二级标题（通常为模块或 Hook 名称，例如 `useState`、`useEffect`）；  
     - 每个模块下的「作用 / 语法 / 示例 / 注意点」等小节。  
   - 将这些模块/小节抽象为**面试问题列表**，例如：  
     - 「如何在函数组件中管理状态？」  
     - 「如何用 useEffect 管理副作用和依赖？」  
     - 「何时应该使用 useCallback 而不是普通函数？」  
   - 为每个问题生成一个**简短的中文问题标题**，用于文件命名。

4. **生成总览播客脚本（可选但推荐）**
   - 以整份文档为范围，设计一场「前端面试对谈」：  
     - 考官按知识点由浅入深提问；  
     - 答题者围绕每个知识点给出四段式回答；  
     - 适当串联实际项目背景，体现工程思维。  
   - 控制整体长度在约 3000 字以内，避免展开所有细节代码，重点讲应用场景与思考方式。  
   - 此部分一般直接作为聊天输出，必要时也可以落盘到 `[输出目录]/总览-xxx.md`，但不是硬性要求。

5. **按问题生成 Markdown 文件**
   - 遍历在步骤 3 中识别的每个问题：  
     - 构造文件名：使用中文问题提炼，移除空格和特殊符号，保留 `.md` 后缀；  
     - 文件落盘路径：`[输出目录]/[中文问题提炼].md`。  
   - 每个文件的内容结构建议为：

     ```markdown
     ## 播客：[中文问题提炼]

     **考官**：用一两句话抛出该问题的背景和具体提问。

     **答题者**：  
     **定义**：……  
     **问题**：……  
     **解决**：……  
     **价值**：……
     ```

   - 文风要求：  
     - 口语化、对话感强，但保持技术准确；  
     - 尽量结合文档中的具体示例（如某个 Hook 的常见用法或坑），但不必逐行贴代码。

6. **覆盖与幂等性**
   - 若 `[输出目录]` 中已存在同名问题文件：  
     - 允许直接覆盖，以最新生成内容为准。  
   - 若多次针对同一技术文档调用本技能，应保持行为可重复、结果一致（除非用户在问题提炼或风格上提出新的要求）。

7. **完成后向用户反馈**
   - 明确告知：  
     - 使用了哪一份 `[技术文档.md]`；  
     - `[输出目录]` 实际路径；  
     - 生成了多少个问题 Markdown 文件，列出文件名示例。  
   - 若还生成了总览播客脚本文件，也应说明路径。

## 使用示例

- **示例 1：使用默认输出目录**

  ```text
  用户：请把 docs/React Hook 使用说明.md 转成播客脚本，并按问题拆成多个 markdown。
  → 技能行为：
    - 读取 docs/React Hook 使用说明.md
    - 默认输出目录为 podcast
    - 生成一篇总览播客对话（可直接在对话中展示）
    - 在 podcast 目录下按问题生成多个 .md 文件
  ```

- **示例 2：指定输出目录**

  ```text
  用户：基于 f:\Documents\Repertory\Own\md2boke\docs\React Hook 使用说明.md 生成播客脚本，输出到 f:\tmp\hooks-podcast。
  → 技能行为：
    - 使用该绝对路径作为技术文档
    - 若 f:\tmp\hooks-podcast 不存在，则创建
    - 在该目录中按问题生成播客 markdown 文件
  ```

## 输出要求总结

- 语言：统一使用**简体中文**。  
- 风格：双人播客，角色为「考官」与「答题者」。  
- 结构：答题者回答必须遵循「定义 → 问题 → 解决 → 价值」四段式。  
- 总览脚本：控制在约 3000 字以内，突出面试经验与工程思维。  
- 文件名：按问题中文提炼命名，直接放在 `[输出目录]` 中。  
- 文件操作：允许覆盖同名文件，确保生成后路径和数量有清晰反馈。

